# This workflow will upload new releases to PyPi
# Could write it explicitely ourself but this was neat.
# Consider moving the docs dependencies to dev to speed up (probably not a problem).
# reference: https://github.com/marketplace/actions/publish-python-poetry-package

name: Upload Python Package to PyPi

on:
  release:
    types: [published]

jobs:
  deploy:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Build and publish to pypi
      uses: JRubics/poetry-publish@v1.17
      with:
        python_version: "3.11"
        plugins: "poetry-dynamic-versioning[plugin]"
        ignore_dev_requirements: "yes"
        pypi_token: ${{ secrets.PYPI_API_TOKEN }}
